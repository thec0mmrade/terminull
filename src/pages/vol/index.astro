---
import { getCollection } from 'astro:content';
import BaseLayout from '../../layouts/BaseLayout.astro';
import BbsMenu from '../../components/BbsMenu.astro';

const allArticles = await getCollection('issues', ({ data }) => !data.draft);
const volumeNums = [...new Set(allArticles.map(a => a.data.volume))].sort((a, b) => a - b);

const volumes = volumeNums.map(vol => {
  const articles = allArticles.filter(a => a.data.volume === vol);
  const count = articles.length;
  return {
    label: `Volume ${String(vol).padStart(2, '0')}`,
    href: `/vol/${vol}`,
    description: `${count} article${count !== 1 ? 's' : ''}`,
  };
});
---

<BaseLayout title="Archive" description="terminull volume archive." page="ARCHIVE">
  <h1 class="page-title">VOLUME ARCHIVE</h1>

  <BbsMenu items={volumes} title="Available Volumes" />

  <div class="archive-footer">
    <p>More volumes coming soon. Type <code>home</code> to return to main menu.</p>
  </div>
</BaseLayout>

<style>
  .page-title {
    color: var(--gold);
    font-size: 2rem;
    margin-bottom: 1.5rem;
    text-transform: uppercase;
    letter-spacing: 0.05em;
  }

  .archive-footer {
    margin-top: 2rem;
    color: var(--text-muted);
    font-size: 1.25rem;
  }

  .archive-footer code {
    color: var(--pink);
    background: var(--bg-surface);
    padding: 0.125rem 0.375rem;
    border: 1px solid var(--border);
    font-family: 'IBM Plex Mono', monospace;
    font-size: 1.25rem;
  }
</style>
